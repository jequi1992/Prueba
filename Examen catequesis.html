<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Final de Catequesis</title>
    <!-- Incluyendo Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Usando la fuente Inter de Tailwind */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para los botones de opción */
        .option-btn {
            transition: all 0.3s ease;
        }
        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }
        .correct {
            background-color: #22c55e; /* green-500 */
            color: white;
            border-color: #16a34a; /* green-600 */
        }
        .incorrect {
            background-color: #ef4444; /* red-500 */
            color: white;
            border-color: #dc2626; /* red-600 */
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div id="quiz-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-10">
        
        <!-- Contenedor Inicial -->
        <div id="start-container" class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Examen Final de Catequesis</h1>
            <p class="text-lg text-gray-600 mb-8">Tienes 40 segundos para responder cada una de las 10 preguntas. ¡Mucha suerte!</p>
            <button id="start-btn" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-lg text-lg transition duration-300">
                Comenzar Examen
            </button>
        </div>

        <!-- Contenedor del Quiz (Oculto al inicio) -->
        <div id="game-container" class="hidden">
            
            <!-- Encabezado: Temporizador y Progreso -->
            <div class="flex flex-col md:flex-row justify-between items-center mb-6 border-b pb-4">
                <div id="progress-text" class="text-lg font-semibold text-gray-700 mb-4 md:mb-0">
                    Pregunta <span id="question-number">1</span> de 10
                </div>
                <!-- Temporizador Grande -->
                <div id="timer-display" class="text-6xl font-bold text-blue-600">
                    40
                </div>
            </div>

            <!-- Pregunta -->
            <div id="question-container" class="mb-8">
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-gray-900 leading-tight">
                    Cargando pregunta...
                </h2>
            </div>

            <!-- Opciones -->
            <div id="options-container" class="grid grid-cols-1 gap-4">
                <!-- Las opciones se generarán con JS aquí -->
            </div>

            <!-- Botón de Siguiente (Oculto hasta responder) -->
            <div class="mt-8 text-right">
                <button id="next-btn" class="hidden bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-10 rounded-lg text-lg transition duration-300">
                    Siguiente
                </button>
            </div>
        </div>

        <!-- Contenedor de Resultados (Oculto al inicio) -->
        <div id="result-container" class="hidden text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">¡Examen completado!</h1>
            <p class="text-2xl text-gray-600 mb-8">
                Tu puntuación final es:
                <span id="score-text" class="text-4xl font-bold text-blue-600">0 / 10</span>
            </p>
            <button id="restart-btn" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-lg text-lg transition duration-300">
                Volver a intentar
            </button>
        </div>
    </div>

    <script>
        // --- 1. DATOS DEL EXAMEN ---
        const quizData = [
            {
                question: "¿Qué es la Eucaristía?",
                options: [
                    "Un símbolo de la amistad de Jesús.",
                    "El Cuerpo y la Sangre de Cristo bajo las apariencias de pan y vino.",
                    "Un pan bendecido especial que comemos solo en Navidad.",
                    "Una fiesta para recordar el bautismo de Jesús."
                ],
                correct: 1 // Índice de la respuesta correcta
            },
            {
                question: "¿Cuántos sacramentos hay en la Iglesia Católica?",
                options: [
                    "Dos (Bautismo y Eucaristía).",
                    "Tres (los de la iniciación cristiana).",
                    "Siete.",
                    "Diez (como los mandamientos)."
                ],
                correct: 2
            },
            {
                question: "¿Cuál es el sacramento que perdona los pecados cometidos después del Bautismo?",
                options: [
                    "La Confirmación.",
                    "La Eucaristía.",
                    "La Reconciliación o Penitencia.",
                    "La Unción de los Enfermos."
                ],
                correct: 2
            },
            {
                question: "¿Cuál es el primer mandamiento de la Ley de Dios?",
                options: [
                    "No tomarás el nombre de Dios en vano.",
                    "Santificarás las fiestas.",
                    "No matarás.",
                    "Amarás a Dios sobre todas las cosas."
                ],
                correct: 3
            },
            {
                question: "¿Cuáles son las dos partes principales de la Misa?",
                options: [
                    "La Homilía y el Credo.",
                    "La Liturgia de la Palabra y la Liturgia de la Eucaristía.",
                    "Las Lecturas y las Ofrendas.",
                    "El Rito de Entrada y el Rito de Despedida."
                ],
                correct: 1
            },
            {
                question: "¿En qué momento instituyó Jesús la Eucaristía?",
                options: [
                    "En su Bautismo.",
                    "Durante el Sermón de la Montaña.",
                    "En la Última Cena con sus apóstoles.",
                    "Después de su Resurrección."
                ],
                correct: 2
            },
            {
                question: "¿Qué significa que Dios es 'Trino'?",
                options: [
                    "Que hay tres dioses diferentes.",
                    "Que es un solo Dios en tres personas distintas: Padre, Hijo y Espíritu Santo.",
                    "Que Dios tiene tres nombres.",
                    "Que Dios es tres veces más poderoso."
                ],
                correct: 1
            },
            {
                question: "¿Quién nos enseñó la oración del 'Padre Nuestro'?",
                options: [
                    "El Papa.",
                    "Moisés.",
                    "La Virgen María.",
                    "Jesucristo."
                ],
                correct: 3
            },
            {
                question: "Para recibir la Primera Comunión, debemos estar libres de:",
                options: [
                    "Pecado mortal.",
                    "Cualquier pensamiento triste.",
                    "Haber comido en la última hora.",
                    "Todas las tareas de la escuela."
                ],
                correct: 0
            },
            {
                question: "¿Dónde enseñó Jesús las Bienaventuranzas?",
                options: [
                    "En el templo de Jerusalén.",
                    "En la barca de Pedro.",
                    "En el Sermón de la Montaña.",
                    "En la Última Cena."
                ],
                correct: 2
            }
        ];

        // --- 2. REFERENCIAS A ELEMENTOS DEL DOM ---
        const startContainer = document.getElementById('start-container');
        const gameContainer = document.getElementById('game-container');
        const resultContainer = document.getElementById('result-container');
        
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');

        const timerDisplay = document.getElementById('timer-display');
        const progressText = document.getElementById('progress-text');
        const questionNumberEl = document.getElementById('question-number');
        
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');

        const scoreTextEl = document.getElementById('score-text');

        // --- 3. VARIABLES DE ESTADO DEL JUEGO ---
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 40;
        const TIME_PER_QUESTION = 40;

        // --- 4. FUNCIONES DEL JUEGO ---

        /**
         * Inicia el examen.
         */
        function startQuiz() {
            startContainer.classList.add('hidden');
            resultContainer.classList.add('hidden');
            gameContainer.classList.remove('hidden');
            
            currentQuestionIndex = 0;
            score = 0;
            
            showQuestion();
        }

        /**
         * Muestra la pregunta actual y sus opciones.
         */
        function showQuestion() {
            resetState();
            
            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }

            const questionData = quizData[currentQuestionIndex];

            // Actualizar texto de progreso y pregunta
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = questionData.question;

            // Limpiar opciones anteriores y crear nuevas
            optionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn', 'w-full', 'text-left', 'p-4', 'border-2', 'border-gray-300', 'rounded-lg', 'text-gray-700', 'font-semibold', 'bg-white', 'hover:bg-gray-50');
                
                // Añadir evento click
                button.addEventListener('click', () => selectAnswer(button, index === questionData.correct));
                optionsContainer.appendChild(button);
            });

            // Iniciar el temporizador
            startTimer();
        }

        /**
         * Inicia y maneja el temporizador de 40 segundos.
         */
        function startTimer() {
            timeLeft = TIME_PER_QUESTION;
            timerDisplay.textContent = timeLeft;
            timerDisplay.classList.remove('text-red-500'); // Quitar color de advertencia

            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;

                if (timeLeft <= 10) {
                    timerDisplay.classList.add('text-red-500'); // Advertencia de poco tiempo
                }

                if (timeLeft <= 0) {
                    stopTimer();
                    handleTimeUp();
                }
            }, 1000);
        }

        /**
         * Detiene el temporizador.
         */
        function stopTimer() {
            clearInterval(timer);
        }

        /**
         * Resetea el estado entre preguntas.
         */
        function resetState() {
            stopTimer();
            nextBtn.classList.add('hidden'); // Ocultar botón 'Siguiente'
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = false;
                button.classList.remove('correct', 'incorrect');
            });
        }

        /**
         * Se ejecuta cuando un usuario selecciona una respuesta.
         */
        function selectAnswer(selectedButton, isCorrect) {
            stopTimer();
            
            // Deshabilitar todos los botones
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                // Mostrar la respuesta correcta
                if (quizData[currentQuestionIndex].correct === Array.from(optionsContainer.children).indexOf(button)) {
                    button.classList.add('correct');
                }
            });

            // Marcar la respuesta seleccionada
            if (isCorrect) {
                score++;
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
            }

            // Mostrar el botón 'Siguiente'
            nextBtn.classList.remove('hidden');
        }

        /**
         * Maneja el caso cuando se acaba el tiempo.
         */
        function handleTimeUp() {
            timerDisplay.textContent = "0";
            
            // Deshabilitar todas las opciones y mostrar la correcta
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true;
                if (index === quizData[currentQuestionIndex].correct) {
                    button.classList.add('correct');
                }
            });

            // Mostrar el botón 'Siguiente'
            nextBtn.classList.remove('hidden');
        }

        /**
         * Muestra la pantalla de resultados finales.
         */
        function showResults() {
            gameContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            scoreTextEl.textContent = `${score} / ${quizData.length}`;
        }

        // --- 5. EVENT LISTENERS ---
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            showQuestion();
        });
        restartBtn.addEventListener('click', startQuiz);

    </script>
</body>
</html>